package com.example.chatapp;

import java.io.InputStream;
import java.io.OutputStream;
import java.net.ServerSocket;
import java.net.Socket;

import android.os.Bundle;
import android.support.v7.app.ActionBarActivity;
import android.view.View;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends ActionBarActivity {

	EditText message;
	TextView Recive;
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		setContentView(R.layout.activity_main);

		try {
			ServerSocket myServerSocket=new ServerSocket(8888);
			Toast.makeText(this,"Listening in 8888, Still Waiting for a connection", Toast.LENGTH_LONG).show();
			Socket mySocket=myServerSocket.accept();	
			Toast.makeText(this,"connected succesfully", Toast.LENGTH_LONG).show();
			InputStream ins=mySocket.getInputStream();
			String s="";
			byte[] b=new byte[10];

			while(ins.read(b)>0){
				s=s+(new String(b));
				b=new byte[10];
			}

			mySocket.close();
			myServerSocket.close();

			System.out.println("Message Received:: \n"+s);
		}catch(Exception e){

		}


	}
	public  void  OnSent(View v) {
		try {
			String myMessage="Hai, I am Stuck.";
			Socket s=new Socket("192.168.1.5", 8888);
			//Socket s=new Socket("111.92.19.74", 8888);

			OutputStream os=s.getOutputStream();


			os.write(myMessage.getBytes());
			os.flush();
			os.close();
			s.close();

		} catch (Exception e) {
			e.printStackTrace();
		}

	}

}



